javascript:%20(function()%20%7B%0A%20%20%20%20const%20apiKey%20=%20'YOUR API KEY';%0A%20%20%20%20const%20currentUrl%20=%20window.location.href;%0A%20%20%20%20const%20videoIdMatch%20=%20currentUrl.match(/%5C/embed%5C/(%5Ba-zA-Z0-9_-%5D%7B11%7D)/);%0A%20%20%20%20if%20(!videoIdMatch)%20return%20alert('動画IDをURLから取得できませんでした%E3%80%82');%0A%20%20%20%20const%20videoId%20=%20videoIdMatch%5B1%5D;%0A%20%20%20%20document.head.innerHTML%20=%20'';%20document.body.innerHTML%20=%20'';%0A%20%20%20%20const%20videoApiUrl%20=%20%60https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&id=$%7BvideoId%7D&key=$%7BapiKey%7D%60;%0A%20%20%20%20const%20commentApiUrl%20=%20%60https://www.googleapis.com/youtube/v3/commentThreads?part=snippet&videoId=$%7BvideoId%7D&key=$%7BapiKey%7D&order=relevance&maxResults=20%60;%0A%0A%20%20%20%20fetch(videoApiUrl)%0A%20%20%20%20%20%20%20%20.then(res%20=%3E%20res.json())%0A%20%20%20%20%20%20%20%20.then(data%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!data.items%20%7C%7C%20!data.items.length)%20return%20alert('動画情報の取得に失敗しました%E3%80%82');%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20%7B%20title,%20description%20%7D%20=%20data.items%5B0%5D.snippet;%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20%7B%20viewCount%20%7D%20=%20data.items%5B0%5D.statistics;%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20container%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20container.style%20=%20'position:relative;display:flex;flex-direction:column;align-items:center;background-color:white;padding:40px;box-sizing:border-box;font-family:Arial,sans-serif;min-height:100vh;';%0A%20%20%20%20%20%20%20%20%20%20%20%20document.body.appendChild(container);%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20videoWrapper%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20videoWrapper.style%20=%20'position:relative;width:100%25;max-width:800px;padding-bottom:56.25%25;height:0;overflow:hidden;margin-bottom:30px;';%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20iframe%20=%20document.createElement('iframe');%0A%20%20%20%20%20%20%20%20%20%20%20%20iframe.src%20=%20%60https://www.youtube-nocookie.com/embed/$%7BvideoId%7D%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20iframe.style%20=%20'position:absolute;top:0;left:0;width:100%25;height:100%25;border:none;';%0A%20%20%20%20%20%20%20%20%20%20%20%20videoWrapper.appendChild(iframe);%0A%20%20%20%20%20%20%20%20%20%20%20%20container.appendChild(videoWrapper);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20埋め込み動画リンク%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20embedLink%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20embedLink.style%20=%20'margin-top:10px;%20font-size:18px;%20font-weight:bold;';%0A%20%20%20%20%20%20%20%20%20%20%20%20embedLink.innerHTML%20=%20%60%3Ca%20href=%22https://www.youtube-nocookie.com/embed/$%7BvideoId%7D%22%20style=%22text-decoration:none;%20color:blue;%22%20target=%22_self%22%3Ehttps://www.youtube-nocookie.com/embed/$%7BvideoId%7D%3C/a%3E%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20container.appendChild(embedLink);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20info%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20info.style%20=%20'margin-top:30px;padding:20px;background-color:rgba(0,0,0,0.8);color:white;border-radius:8px;width:100%25;max-width:800px;text-align:left;';%0A%20%20%20%20%20%20%20%20%20%20%20%20info.innerHTML%20=%20%60%3Cstrong%3Eタイトル:%3C/strong%3E%20$%7Btitle%7D%3Cbr%3E%3Cstrong%3E概要:%3C/strong%3E%20$%7Bdescription%7D%3Cbr%3E%3Cstrong%3E視聴回数:%3C/strong%3E%20$%7BviewCount%7D回%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20container.appendChild(info);%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20allComments%20=%20%5B%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20fetchCount%20=%200;%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20function%20fetchComments(pageToken%20=%20'')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(fetchCount%20%3E=%209)%20return%20displayComments(allComments);%20//%20最大9回まで取得%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20url%20=%20%60$%7BcommentApiUrl%7D$%7BpageToken%20?%20%60&pageToken=$%7BpageToken%7D%60%20:%20''%7D%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fetch(url)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.then(res%20=%3E%20res.json())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.then(commentData%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!commentData.items%20%7C%7C%20!commentData.items.length)%20return%20alert('コメントはまだありません%E3%80%82');%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20allComments%20=%20%5B...allComments,%20...commentData.items%5D;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fetchCount++;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(commentData.nextPageToken%20&&%20fetchCount%20%3C%209)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fetchComments(commentData.nextPageToken);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20displayComments(allComments);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.catch(()%20=%3E%20alert('コメントの取得に失敗しました%E3%80%82'));%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20function%20displayComments(comments)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20sortedComments%20=%20comments.sort((a,%20b)%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20likeCountA%20=%20a.snippet.topLevelComment.snippet.likeCount%20%7C%7C%200;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20likeCountB%20=%20b.snippet.topLevelComment.snippet.likeCount%20%7C%7C%200;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20likeCountB%20-%20likeCountA;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20commentsContainer%20=%20document.createElement('div');%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20commentsContainer.style%20=%20'margin-top:30px;padding:20px;background-color:rgba(255,255,255,0.9);color:black;border-radius:8px;width:100%25;max-width:800px;height:1600px;overflow-y:auto;box-shadow:0%204px%206px%20rgba(0,0,0,0.2);';%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20sortedComments.forEach(item%20=%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20%7B%20authorDisplayName,%20textDisplay%20%7D%20=%20item.snippet.topLevelComment.snippet;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20const%20likeCount%20=%20item.snippet.topLevelComment.snippet.likeCount%20%7C%7C%200;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20commentsContainer.innerHTML%20+=%20%60%3Cstrong%3E$%7BauthorDisplayName%7D:%3C/strong%3E%3Cbr%3E$%7BtextDisplay%7D%3Cbr%3E%3Cem%3Eいいね:%20$%7BlikeCount%7D%3C/em%3E%3Cbr%3E%3Cbr%3E%60;%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D);%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20container.appendChild(commentsContainer);%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20fetchComments();%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20.catch(()%20=%3E%20alert('動画情報の取得に失敗しました%E3%80%82'));%0A%7D)();%0A
